(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[648],{5107:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var a=r(7876),s=r(4232),i=r(9099),n=r(7326),l=r(6955);let o=()=>{let e=(0,i.useRouter)(),[t,r]=(0,s.useState)(!1),[o,c]=(0,s.useState)(null),[m,u]=(0,s.useState)({title:"",location:"",teamDescription:"",jobDescription:"",responsibilities:[""],recruitmentTeam:{teamName:"",manager:"",interviewers:[{name:"",department:""}]}}),d=async t=>{t.preventDefault(),r(!0),c(null);try{let t=n.y.getToken();if(!t)throw Error("No authentication token found");let r=await fetch(l.S.jobs,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({title:m.title,location:m.location,teamDescription:m.teamDescription,jobDescription:m.jobDescription,responsibilities:m.responsibilities,recruitmentTeam:{teamName:m.recruitmentTeam.teamName,manager:m.recruitmentTeam.manager}})});if(!r.ok)throw Error("Failed to create job");let a=await r.json(),s=m.recruitmentTeam.interviewers.map(e=>fetch(l.S.interviewers,{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({jobId:a.id,name:e.name,department:e.department})}));if((await Promise.all(s)).filter(e=>!e.ok).length>0)throw Error("Failed to create some interviewers");await e.push("/dashboard")}catch(e){console.error("Error creating job:",e),c(e instanceof Error?e.message:"An error occurred while creating the job")}finally{r(!1)}},b=(e,t)=>{let r=[...m.responsibilities];r[e]=t,u(e=>({...e,responsibilities:r}))},p=(e,t,r)=>{let a=[...m.recruitmentTeam.interviewers];a[e]={...a[e],[t]:r},u(e=>({...e,recruitmentTeam:{...e.recruitmentTeam,interviewers:a}}))};return(0,a.jsx)("div",{className:"min-h-screen bg-[#FAFAFA]",children:(0,a.jsxs)("main",{className:"max-w-4xl mx-auto px-8 py-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold mb-8",children:"Buat Lowongan Baru"}),o&&(0,a.jsx)("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600",children:o}),(0,a.jsxs)("form",{onSubmit:d,className:"space-y-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-4",children:"Informasi Dasar"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Judul Pekerjaan"}),(0,a.jsx)("input",{type:"text",value:m.title,onChange:e=>u(t=>({...t,title:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Lokasi"}),(0,a.jsx)("input",{type:"text",value:m.location,onChange:e=>u(t=>({...t,location:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-4",children:"Deskripsi"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi Tim"}),(0,a.jsx)("textarea",{value:m.teamDescription,onChange:e=>u(t=>({...t,teamDescription:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-32",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Deskripsi Pekerjaan"}),(0,a.jsx)("textarea",{value:m.jobDescription,onChange:e=>u(t=>({...t,jobDescription:e.target.value})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 h-32",required:!0})]})]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-4",children:"Tanggung Jawab"}),m.responsibilities.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("input",{type:"text",value:e,onChange:e=>b(t,e.target.value),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),m.responsibilities.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>u(e=>({...e,responsibilities:e.responsibilities.filter((e,r)=>r!==t)})),className:"px-2 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Hapus"})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{u(e=>({...e,responsibilities:[...e.responsibilities,""]}))},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Tambah Tanggung Jawab"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[(0,a.jsx)("h2",{className:"font-bold text-lg mb-4",children:"Tim Rekrutmen"}),(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Nama Tim"}),(0,a.jsx)("input",{type:"text",value:m.recruitmentTeam.teamName,onChange:e=>u(t=>({...t,recruitmentTeam:{...t.recruitmentTeam,teamName:e.target.value}})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Manager"}),(0,a.jsx)("input",{type:"text",value:m.recruitmentTeam.manager,onChange:e=>u(t=>({...t,recruitmentTeam:{...t.recruitmentTeam,manager:e.target.value}})),className:"w-full px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0})]})]}),(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)("h3",{className:"font-semibold mb-2",children:"Interviewers"}),m.recruitmentTeam.interviewers.map((e,t)=>(0,a.jsxs)("div",{className:"flex items-center gap-2 mb-2",children:[(0,a.jsx)("input",{type:"text",placeholder:"Nama Interviewer",value:e.name,onChange:e=>p(t,"name",e.target.value),className:"w-1/2 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),(0,a.jsx)("input",{type:"text",placeholder:"Departemen",value:e.department,onChange:e=>p(t,"department",e.target.value),className:"w-1/2 px-3 py-2 border rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",required:!0}),m.recruitmentTeam.interviewers.length>1&&(0,a.jsx)("button",{type:"button",onClick:()=>u(e=>({...e,recruitmentTeam:{...e.recruitmentTeam,interviewers:e.recruitmentTeam.interviewers.filter((e,r)=>r!==t)}})),className:"px-2 py-1 bg-red-500 text-white rounded-lg hover:bg-red-600",children:"Hapus"})]},t)),(0,a.jsx)("button",{type:"button",onClick:()=>{u(e=>({...e,recruitmentTeam:{...e.recruitmentTeam,interviewers:[...e.recruitmentTeam.interviewers,{name:"",department:""}]}}))},className:"mt-2 px-4 py-2 bg-blue-500 text-white rounded-lg hover:bg-blue-600",children:"Tambah Interviewer"})]})]}),(0,a.jsx)("div",{className:"flex justify-end",children:(0,a.jsx)("button",{type:"submit",className:"px-6 py-2 bg-black text-white rounded-lg hover:bg-gray-900 flex items-center gap-2",disabled:t,children:t?"Menyimpan...":"Simpan Lowongan"})})]})]})})}},6955:(e,t,r)=>{"use strict";r.d(t,{S:()=>s});let a="https://warkop-be.vercel.app/api",s={jobs:"".concat(a,"/jobs"),candidates:"".concat(a,"/candidates"),interviewers:"".concat(a,"/interviewers"),users:"".concat(a,"/users"),resume:"".concat(a,"/resume")}},7808:(e,t,r)=>{(window.__NEXT_P=window.__NEXT_P||[]).push(["/job/create",function(){return r(5107)}])},9099:(e,t,r)=>{e.exports=r(8253)}},e=>{var t=t=>e(e.s=t);e.O(0,[636,593,792],()=>t(7808)),_N_E=e.O()}]);